(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{171:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/sankeychart-c9e98c682b6db9e59e983c4194e125c9.png"},172:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/sankeychartexample-105c1422e47fead7cfdc4bf266c9dd23.png"},173:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/sankeychartexampledisplay-776df691ecc22b41160afb90bfa1373e.png"},80:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return i})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return s}));var r=n(3),a=(n(0),n(97));const o={id:"sankeychart",title:"Sankey"},i={unversionedId:"sankeychart",id:"sankeychart",isDocsHomePage:!1,title:"Sankey",description:"Overview",source:"@site/docs/sankeychart.md",slug:"/sankeychart",permalink:"/spesql/docs/sankeychart",version:"current",sidebar:"docs",previous:{title:"Layout",permalink:"/spesql/docs/visualizationlayout"},next:{title:"Settings Page",permalink:"/spesql/docs/settingspage"}},c=[{value:"Overview",id:"overview",children:[]},{value:"Data Format",id:"data-format",children:[]},{value:"Form Layout",id:"form-layout",children:[]},{value:"Example",id:"example",children:[]}],l={rightToc:c};function s({components:e,...t}){return Object(a.b)("wrapper",Object(r.a)({},l,t,{components:e,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"overview"},"Overview"),Object(a.b)("p",null,"A sankey diagram is a visualization used to depict a flow from one set of values to another. The things being connected are called nodes and the connections are called links."),Object(a.b)("p",null,"Sankeys are best used when you want to show a many-to-many mapping between two domains (e.g., universities and majors) or multiple paths through a set of stages"),Object(a.b)("h2",{id:"data-format"},"Data Format"),Object(a.b)("p",null,"Sankey diagrams require the following structure:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"[string, string, number]\n")),Object(a.b)("p",null,"The ",Object(a.b)("inlineCode",{parentName:"p"},"number")," represents a weight value between the two strings. In the upcoming example, this weight is simply the occurrence count of the combination."),Object(a.b)("h2",{id:"form-layout"},"Form Layout"),Object(a.b)("img",{src:n(171).default,alt:"Bulk Insert",class:"shadow round"}),Object(a.b)("br",null),Object(a.b)("br",null),Object(a.b)("p",null,"The form is structured in a way which enforces the data format required to load the chart. The third field has the optional aggregate option, which allows you to perform an aggregate on field three if it is not a numeric field."),Object(a.b)("p",null,"If you are unfamiliar with SQL Aggregate Function, please feel free to review the following resources:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"1"),Object(a.b)("li",{parentName:"ul"},"2"),Object(a.b)("li",{parentName:"ul"},"3")),Object(a.b)("h2",{id:"example"},"Example"),Object(a.b)("p",null,"In this example, I will use a Sankey to chart Genus in the museum collections database with their Collectors. For visual clarity sake, I will be heavily restricting the query with conditions, so the chart does not get overly populated."),Object(a.b)("img",{src:n(172).default,alt:"Bulk Insert",class:"shadow round"}),Object(a.b)("br",null),Object(a.b)("br",null),Object(a.b)("p",null,"I am selecting the ",Object(a.b)("inlineCode",{parentName:"p"},"genus")," and ",Object(a.b)("inlineCode",{parentName:"p"},"recordedBy")," fields, which will correspond to the first two ",Object(a.b)("inlineCode",{parentName:"p"},"string")," fields in the data format requirement (in that respective order)."),Object(a.b)("p",null,"I am restricting the data to reduce it by requiring ",Object(a.b)("inlineCode",{parentName:"p"},"genus")," to start with the letter 'A' or 'a' and ",Object(a.b)("inlineCode",{parentName:"p"},"recordedBy")," to start with the letter 'C' or 'c'."),Object(a.b)("p",null,"The resulting, formatted query is as follows:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-sql"}),'SELECT\n  genus,\n  recordedBy,\n  COUNT(*)\nFROM\n  molecularLab\nWHERE\n  genus LIKE "%a" AND\n  recordedBy LIKE "%a"\nGROUP BY genus, recordedBy\n')),Object(a.b)("p",null,"This query will render the following chart:"),Object(a.b)("img",{src:n(173).default,alt:"Bulk Insert",class:"shadow round"}),Object(a.b)("br",null),Object(a.b)("br",null),Object(a.b)("p",null,Object(a.b)("em",{parentName:"p"},"Note: this renders rather small in the browser, I suggest 'opening image in a new tab' for best viewing")))}s.isMDXComponent=!0},97:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=a.a.createContext({}),u=function(e){var t=a.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},b=function(e){var t=u(e.components);return a.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),b=u(n),d=r,m=b["".concat(i,".").concat(d)]||b[d]||p[d]||o;return n?a.a.createElement(m,c(c({ref:t},s),{},{components:n})):a.a.createElement(m,c({ref:t},s))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var s=2;s<o;s++)i[s]=n[s];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);